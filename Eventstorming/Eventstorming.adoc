= Event storming
:toc:

== A deep dive into problem space

=== Running a big picture workshop
Służy do zbudowania modelu aktualnego zrozumienia systemu, znaleźć ryzyka i problemy. Biorą w nim udział wszystkie najważniejsze osoby zaangażowane w biznes. Podczas sesji:

- Budujemy model zawierający wszystkie linie biznesu, pokazujemy komunikację między elementami, ich granice i różne perspektywy.
- Odkrywamy i walidujemy najważniejszy problem do rozwiązania.
- Odkrywamy ryzyka.

==== Najważniejsze składniki
- Dobrani ludzie, cechujący się ciekawością i ekspertyzą.
- Duży pokój (długa ściana, miejsce do poruszania, brak miejsc siedzących, paper roll na ścianie, flip-chart z legendą, dużo karteczek i markerów, jedzenie i picie, timer).
- Co najmniej jeden facilitator.

image::./00015.jpeg[Pokój]

==== Struktura sesji
Fazy o rosnącym stopniu skomplikowania:

- kick-off
- chaotic exploration
- enforcing the timeline
- explicit walk-through
- problems and opportunities
- pick your problem

==== Kick-off
Każdy się przedstawia i określany jest cel sesji. Musimy zachęcić ludzi do uczestniczenia i ostrzec, że może być chaotycznie. Ta faza jest krótka.

==== Chaotic exploration
image::00016.jpeg[Domain event]
Wykorzystujemy tu domain events (pomarańczowe karteczki), które staramy się układać z grubsza według czasu. Notację możemy zawrzeć na widocznej legendzie. Trudny jest początek, ale powinniśmy się postarać, aby to uczestnicy zaczęli. Unikamy karteczek z nazwą procesu, musimy sięgnąć głębiej do niego. Powinniśmy rozłączać mniejsze grupki. Prawdopodobnie otrzymamy kilka zbiorów ułożonych eventów, ale całość procesu będzie nieułożona. W pewnym momencie dokładanie ustanie i ludzie zaczną kontemplować i patrzeć na całość.

==== Enforcing the timeline
image::00041.jpeg[Enforcing the timeline]
Musimy się upewnić, że cały proces jest ułożony w dobrej kolejności. To w tym momencie zacznie się dużo dyskusji. Problemem może być mało miejsca, można dołożyć drugą taśmę lub skorzystać z *Chapters Sorting*. Warto wybrać dobrą strategię i połączyć kilka.

===== Sorting strategies
image::00042.jpeg[Pivotal events]
- Pivotal Events — Szukamy kilku (4-5) najważniejszych eventów i dajemy przez nie pionowe kreski, które określają ważne momenty. Potem możemy szukać po danym obszarze.

image::00043.jpeg[Swimlanes]
- Swimlanes — Poziome obszary przydzielone do danego aktora. Poprawiają czytelność, ale zajmują pionowe miejsce, które jest ograniczone. Przydają się, gdy mamy pojedynczy proces lub parę współbieżnych. Możemy też zrobić mini swimlines, gdy mamy ustaloną wstępną strukturę za pomocą *Pivotal Events* lub *Temporal Milestones*. Możemy też podpisać dany proces.

image::00044.jpeg[Temporal milestones]
- Temporal Milestones — Czasami *Pivotal Events* nie są dobre (dużo współbieżnych lub brak dokładnego ułożenia). Temporal Milestones polegają na wybraniu jakiegoś ważnego zdarzenie i wyznaczenia obszarów czasowych (rok przed, 6 miesięcy przed itd.) w które dajemy eventy.

image::00045.jpeg[Chapters sorting]
- Chapters Sorting — Przydatne, gdy jest mało miejsca. Wybieramy około 15-25 ważnych eventów, układamy je gdzieś obok i układamy na głównej tablicy, porządkując resztę.

===== HotSpots
Podczas układania powinniśmy szukać miejsc (HotSpot), które są szczególnie sporne i zaznaczać je fioletowymi karteczkami. Łapiemy w nich komentarze i zgrzyty.

===== People and systems
image::00047.jpeg[People and systems]
Używamy małych, żółtych karteczek, by oznaczyć aktorów danego procesu. Nie chodzi o to, aby dodać aktora do każdego możliwego procesu, ale żeby wywołać dyskusję, np. nad nazewnictwem danego aktora. Oznaczamy też external systems, czyli każda część flow, na którą nie mamy wpływu. Wiele rzeczy możemy tak nazwać (bad luck, Brexit). Takie systemy często dadzą nam dużo nowych eventów. Warto nie pomijać szczegółów, nawet jak mamy mało miejsca.

==== Explicit walk-through
image::00050.jpeg[Explicit walk-through]
W tej fazie prosimy kogoś, aby przeszedł się przez daną część procesu, starając się opowiedzieć logiczną historię, gdzie jedno zdarzenie wynika z poprzedniego. Mówimy na głos. Dodajemy eventy, które nam brakują. Powinniśmy zmieniać narratora co jakiś czas. Powinniśmy uważać na dyskusje i jeżeli są zbyt długie to oznaczać je jako *HotSpot*. Patrząc na mowę ciała, możemy ocenić, czy dana dyskusja jest interesująca.

===== Telling the story backward
image::00051.jpeg[Reverese narrative]
Wybieramy event z końca procesu i patrzymy, czy poprzedzające je eventy wystarczą, aby ten się zadział. Dany event powinien być bezpośrednim skutkiem. Można też analizować od *Pivotal Events*.

==== Bonus phase: Add the money
Możemy spróbować skupić się na przepływie pieniędzy.

==== Problems and opportunities
image::00053.jpeg[Problems and opportunities]
W tym momencie cały model jest widoczny. Zostaje ostatnie 10-15 minut na dodanie problemów i możliwości. Problemy jako fioletowe karteczki tak jak HotSpoty, a możliwości zielone.

==== Pick your problem
image::00055.jpeg[Arrow Voting]
Można zakończyć przez *Arrow Voting*. Każdy dostaje dwie strzałki i może je wskazać na dowolny problem lub możliwość. Czasami głosowanie nie jest dobrym pomysłem.

=== Playing with value
image::00059.jpeg[Playing with value]
Opcjonalny krok przy big picture. Zwykle po *People and systems* lub *Explicit walk-through*. Skupiamy się, gdzie dostarczana jest wartość. Możemy użyć zielonych kartek, by oznaczyć miejsca, w których tworzona jest wartość lub dzieje się coś pozytywnego i czerwone dla przeciwnego przypadku. Warto rozpocząć dyskusję nad czymś więcej niż pieniądze. Możemy odkryć nowe możliwości, poprzez sprawdzenie czego każdy potrzebuje (rekruter i pracownik korzystają z jednej platformy). Trudności ze znalezieniem wartości mogą prowadzić do opuszczenia projektu.

=== Discovering bounded contexts
Odkrycie dobrych bounded contexts na początku projektu ma duże znaczenie.

==== Finding bounded context
image::00060.gif[Bounded contexts]
Jeden bounded context powinien zawierać model dopasowany pod specyficzny cel. Musimy także znaleźć sposób na komunikację między kontekstami. Znalezienie BCs należy do zadania programisty.

==== Enter EventStorming
Należy zatrzymać eventy podczas cichej eksploracji, które wydają się duplikatami, ale używają innych słów. Może się okazać, że są to nałożone BC.

image::00062.jpeg[Overlapping contexts]
Podczas poszukiwania ludzi i systemów to właśnie systemy wskazują nam na różne bounded contexts.

==== Homework time
Po wykonaniu eventstorming należy przeznaczyć trochę czasu na analizę. Wykrycie BCs można wyczytać z tablicy. Można zastosować heurystyki

===== Heuristics
- look at the business phases

image::00067.jpeg[Bounded contexts after Big Picture EventStorming]
image::00065.jpeg[Zoom-in into a pivotal event]
To, co jest między pivotal events, należy często do innych BC. Są one często elementami wspólnego języka między BC.

- Look at the swimlanes

image::00068.jpeg[Look at the swimlanes]
Często osobne swimlanes są elementami osobnych BCs. Czasami są tylko if-statements w innym procesie.

- Look at the people on the paper roll

image::00069.jpeg[Look at the people on the paper roll]
Osobne role w systemie mogą należeć do osobnych BC (gwiazda jako speaker, zwykła osoba i call for papers).

- Look at the humans in the room

Różni ludzie w pokoju są oznaką różnych potrzeb, a więc też różnych modeli.

- Listen to the actual language

Zwracać uwagę głównie na czasowniki, gdyż wiele rzeczy może opisywać ten sam rzeczownik.

=== Making it happen
Powinniśmy zwracać uwagę na parę rzeczy podczas spotkania:

- Starać się trzymać ten sam kolor karteczek (ważne) i mieć na nich zdania w odpowiednim czasie (mniej ważne, chyba że większość).
- Zapewnić niezliczoną ilość karteczek i markerów
- Utrzymać widoczną legendę z notacją
- Dodawać definicje znane przez większość (u dołu, inna karteczka, żółta?)
- Nie używać strzałek, jeżeli konsekwencja jest daleko to zduplikować.
- Linia czasu nie musi być bardzo dokładna.

=== Workshop aftermath
Workshop powinien być skończony, kiedy ludzie muszą iść na inne spotkanie. Bez jedzenia i posiłków będzie to około 2 godziny.

==== How do we know we did a good job?
Każdy workshop polega nie na zbudowaniu modelu, ale żeby wywołać konwersacje i polepszyć ich jakość.

==== Visual check
Parę rzeczy, które warto sprawdzić, żeby zobaczyć czy dobrze nam poszło.

- Czy mamy hotspoty? Czy odbyła się konwersacja o najbardziej interesujących problemach?
- Czy mamy około 100-200 eventów (dla 2-godzinnej sesji)?
- Czy mamy wszystkie systemy zewnętrzne?
- Zapytać, czy czegoś brakuje.

==== Focusing on the hot spot
Jeżeli jakiś problem pojawia się i wielu się zgadzać to powinniśmy wykorzystać ten moment na eksplorację tego problemu. Jeżeli jest ich wiele, to warto potrzymać wynik parę dni, aby zastąpić je przez nowe wersje flow.

=== Big Picture in remote mode
image::00082.jpeg[]
Zrozumienie problemu pomaga w pracy zdalnej, ponieważ praca wymaga wtedy o wiele mniej niepotrzebnej komunikacji.

==== Niespodziewane konsekwencje
- Mniejsze zaangażowanie
- Łatwiejsza prokrastynacja
- Brak całodziennych sesji
- Brak nacisku ze strony innych
- Brak czasu na poznanie się
- Brak wpływu mowy ciała
- Trudności związane z posiadaną technologią
- Brak spontanicznych, równoległych konwersacji

==== Looking for bounded contexts
image::00076.jpeg[Looking for bounded contexts]
Większość heurystyk dalej spełnia swoje zadanie, oprócz tych związanych z mową ciała. Możemy lekko zmienić notację. Użyć *frames*, aby wydzielić BC, użyć większych kartek dla Pivotal Events i użyć strzałek, aby połączyć event do nasłuchujących systemów. Jeżeli zależy nam tylko na wykryciu BC, to możemy spróbować podzielić sesję między ludzi.

===== Validated narrative
Dalej taka sama forma, ale możemy łatwo kopiować i tworzyć kolejne iteracje bazując na poprzedniej.

==== Patterns for remote Big Picture
- Podzielić sesję, aby niektórzy pracowali równolegle. Musimy wprowadzić każdego i mieć kogoś, kto dobrze zna warsztat.
- Utworzyć podstawową strukturę, np. poprzez szybkie Pivotal Events, tak aby inni nie tworzyli zbyt lokalnie.
- Możemy użyć kolorów, jako czyjegoś podpisu. Później musimy je stopniowo wycofywać.
- Możemy użyć kolorów jako progresu, koniec jest wtedy, gdy wymienimy wszystkie kolorowe karteczki na pomarańczowe w explicit walkthrough.

image::00079.jpeg[]

- Iterować tworząc model. Pozwala nam to patrzeć wstecz i eksperymentować. Każdy eksperyment powinien trwać około 5-10 minut, potem oceniamy i ewentualnie wracamy.
- Decyzję, mogą być zmieniane. Jeżeli opuszczamy jakiś kierunek, to powinniśmy pokazać dlaczego.

image::00080.jpeg[]